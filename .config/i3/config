##### i3-config / DARCH  #######################
#

##### GENERAL ##################################### 

set $mod Mod4

# font pango: monospace 8
# font pango: Inconsolata Nerd Font Mono 12
font pango: Inconsolata 12

# APP VARIABLES
set $browser	firefox
set $music  	spotify
set $term   	urxvt

# DIR VARIABLES
set $bin ~/bin

# RESIZE VARIABLES
set $center move absolute position center

# FLOATING
floating_modifier $mod

# DEFAULT BORDER
for_window [class="^.*"] border pixel 0
for_window [title="^.*"] border pixel 0

# APPLICATION BORDERS
set $thick 24
#for_window [class="Emacs"] border pixel $thick
#for_window [class="Terminator"] border pixel $thick
#for_window [class="st"] border pixel $thick

# FLOATING APPLICATIONS
for_window [class="feh"] floating enable
for_window [class="Qalculate-gtk"] floating enable
for_window [class="Matplotlib"] floating enable
for_window [class="MATLAB R2019a - academic use"] floating enable

# GAP VARIABLES
set $inner 20
set $outer 10

# SET GAPS
gaps inner $inner
gaps outer $outer

# TOGGLE GAPS
#bindsym $mod+g exec compton; gaps inner all set $inner; gaps outer all set $outer
#bindsym $mod+Ctrl+g exec compton; gaps inner all set 0; gaps outer all set 0

# TERMINAL BINDS
bindsym $mod+Return exec $term 
#bindsym $mod+Shift+Return exec
#bindsym $mod+Ctrl+Return exec
#bindsym $mod+Shift+Ctrl+Return exec

# SCRATCHPAD
#bindsym $mod+BackSpace scratchpad show
#bindsym $mod+Shift+BackSpace floating enable, move position $thick px $thick px, move scratchpad
#bindsym $mod+Ctrl+BackSpace exec $term -e tmux new-session -A -s scratch 

# KILL
bindsym $mod+Shift+q      kill
# RELOAD 
bindsym $mod+Shift+c reload
# RESTART
bindsym $mod+Shift+r restart
# LOCK SCREEN
bindsym $mod+Shift+x exec ~/.scripts/lock_script.sh
# EXIT i3 (logs you out of your X session)
bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"

##### MOVEMENT ####################################

# FOCUS
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# MOVE
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# RESIZE

mode "resize" {
        # These bindings trigger as soon as you enter the resize mode

        # Pressing left will shrink the window’s width.
        # Pressing right will grow the window’s width.
        # Pressing up will shrink the window’s height.
        # Pressing down will grow the window’s height.
        bindsym h resize shrink width 10 px or 10 ppt
        bindsym j resize grow height 10 px or 10 ppt
        bindsym k resize shrink height 10 px or 10 ppt
        bindsym l resize grow width 10 px or 10 ppt

        # same bindings, but for the arrow keys
        bindsym Left resize shrink width 10 px or 10 ppt
        bindsym Down resize grow height 10 px or 10 ppt
        bindsym Up resize shrink height 10 px or 10 ppt
        bindsym Right resize grow width 10 px or 10 ppt

	# Smaller changes
        bindsym Shift+h resize shrink width 1 px or 1 ppt
        bindsym Shift+j resize grow height 1 px or 1 ppt
        bindsym Shift+k resize shrink height 1 px or 1 ppt
        bindsym Shift+l resize grow width 1 px or 1 ppt

        # same bindings, but for the arrow keys
        bindsym Shift+Left resize shrink width 1 px or 1 ppt
        bindsym Shift+Down resize grow height 1 px or 1 ppt
        bindsym Shift+Up resize shrink height 1 px or 1 ppt
        bindsym Shift+Right resize grow width 1 px or 1 ppt

        # back to normal: Enter or Escape or $mod+r
        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym $mod+r mode "default"
}

bindsym $mod+r mode "resize"

# VERTICAL SPLIT
bindsym $mod+v split v

# HORIZONTAL SPLIT
bindsym $mod+b split h

# LAYOUT 
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# FULLSCREEN
bindsym $mod+f fullscreen toggle

# TOGGLE FLOATING
bindsym $mod+space floating toggle; $center

# MODE TOGGLE
bindsym $mod+Shift+space focus mode_toggle

# PAPER MODE
#bindsym $mod+Ctrl+space floating toggle; resize set 700px 975px; $center

# CENTER FLOATING
#bindsym $mod+c $center

##### WORKSPACES ##################################

# WORKSPACES
set $ws1 "1: Browser "
set $ws2 "2: Vim ﯑"
set $ws3 "3: Terminal "
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"

# Exampel on how to name with color
# set $ws9 9:<span foreground="red">vim</span>

# SWITCH TO WORKSPACE
bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+6 workspace $ws6
bindsym $mod+7 workspace $ws7
bindsym $mod+8 workspace $ws8
bindsym $mod+9 workspace $ws9
bindsym $mod+0 workspace $ws10

# MOVE WINDOW TO WORKSPACE
bindsym $mod+Shift+1 move container to workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2
bindsym $mod+Shift+3 move container to workspace $ws3
bindsym $mod+Shift+4 move container to workspace $ws4
bindsym $mod+Shift+5 move container to workspace $ws5
bindsym $mod+Shift+6 move container to workspace $ws6
bindsym $mod+Shift+7 move container to workspace $ws7
bindsym $mod+Shift+8 move container to workspace $ws8
bindsym $mod+Shift+9 move container to workspace $ws9
bindsym $mod+Shift+0 move container to workspace $ws10

# WORKSPACE SPECIFIC GAPS
 workspace $ws1 gaps inner 0
 workspace $ws1 gaps outer 0

##### COLORS #######################################

# XRESOURCES
#set_from_resource $bg background
#set_from_resource $fg foreground

# CLASS                 BORDER  BACK    TEXT    INDICATOR
#client.focused          $bg     $bg     $bg     $bg
#client.focused_inactive $bg     $bg     $bg     $bg 
#client.unfocused        $bg     $bg     $bg     $bg
#client.urgent           $bg     $bg     $bg     $bg 
#client.placeholder      $bg     $bg     $bg     $bg 

##### TOOLS ########################################

# SCREENSHOT
set $shots ~/Pictures/screenshots

bindsym $mod+Print exec maim $shots/$(date +%s).png
bindsym $mod+Ctrl+Print exec maim -s $shots/$(date +%s).png
bindsym $mod+Shift+Print exec feh $(last $shots)

# MEDIA CONTROLS
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume 0 +5%
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume 0 -5%
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute 0 toggle

bindsym XF86MonBrightnessDown exec --no-startup-id light -U 10 
bindsym XF86MonBrightnessUp exec --no-startup-id light -A 10 

bindsym $mod+m exec light -S 0.2
bindsym $mod+Shift+m exec light -S 100

# ROFI
bindsym $mod+Tab       exec rofi -show window -theme my_sidebar -display-window ""
#bindsym $mod+Ctrl+d  exec rofi-dict
bindsym $mod+d exec rofi -show run -theme my_sidebar -display-window ""

# CALCULATOR
bindsym $mod+c exec qalculate-gtk

# BACKGROUND
exec_always --no-startup-id feh --bg-scale ~/Pictures/Wallpapers/wallpaper.jpg


##### APP BINDS ###################################

bindsym $mod+n       exec $browser
#bindsym $mod+Ctrl+n  exec rofi-search "$browser --new-window"
#bindsym $mod+Shift+n exec rofi-web    "$browser --new-window" 

#bindsym $mod+m       exec spotify
#bindsym $mod+Ctrl+m  exec steam
#bindsym $mod+Shift+m exec discord

#bindsym $mod+t       exec rofi-twitch -f
#bindsym $mod+Ctrl+t  exec rofi-twitch -d
#bindsym $mod+Shift+t exec rofi-twitch

#bindsym $mod+y       exec
#bindsym $mod+Ctrl+y  exec
#bindsym $mod+Shift+y exec

#bindsym $mod+u       exec dolphin-emu
#bindsym $mod+Ctrl+u  exec 
#bindsym $mod+Shift+u exec 

#bindsym $mod+i       exec emacsclient -c
#bindsym $mod+Ctrl+i  exec pkill emacs && emacs --daemon
#bindsym $mod+Shift+i exec emacs

#bindsym $mod+o       exec rofi-now
#bindsym $mod+Ctrl+o  exec rofi-vol
#bindsym $mod+Shift+o exec rofi-bat


##### BAR #########################################

# Colors 

set $bg #101010
set $fg #d9e6f2

set $black #000000
set $darkgrey #101010
set $red #dc571a
set $green #8ea01f
set $yellow #d7a01a
set $orange #dc821a
set $blue #935268
set $magenta #dc5262
set $cyan #8e9a68
set $white #ffffff

bar {
	mode hide
	hidden_state hide
	modifier $mod
	position top
    status_command i3status
    strip_workspace_numbers yes
    separator_symbol "  "
    tray_padding 5 
    colors {
		# bar background color
		background $bg
		# text color used for blocks that do not have a color specified.
		statusline $yellow
		# workspaces section
		#						border		backgr		text
		focused_workspace		$orange 	$orange 	$bg
		inactive_workspace		$bg       	$bg       	$orange
		active_workspace		$bg       	$bg       	$orange
		urgent_workspace		$red		$red		$white
    }
}

##### LAUNCH ###################################### 

# STARTUP
exec_always --no-startup-id compton
#exec --no-startup-id $term
exec --no-startup-id dropbox start
exec --no-startup-id redshift
#exec ~/.Conky/startconky.sh
#exec_always --no-startup-id xautolock -time 5 -locker '~/.i3lockscript/blurshot.sh'

#TODO Fix conky

# RELOAD
#exec_always --no-startup-id compton
